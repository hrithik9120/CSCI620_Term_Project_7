# Functional Dependencies Report

*Generated by Functional Dependencies Discovery Tool*

## Executive Summary

- **Total Tables Analyzed**: 1
- **Total Functional Dependencies Discovered**: 11

## Detailed Analysis by Table

### Table: `May2015`

**Columns**: created_utc, ups, subreddit_id, link_id, name, score_hidden, author_flair_css_class, author_flair_text, subreddit, id, removal_reason, gilded, downs, archived, author, score, retrieved_on, body, distinguished, edited, controversiality, parent_id
**Row Count**: 5,000

#### Functional Dependencies

**Candidate Key Dependencies:**

- `name` → `created_utc, ups, subreddit_id, link_id, score_hidden, author_flair_css_class, author_flair_text, subreddit, id, removal_reason, gilded, downs, archived, author, score, retrieved_on, body, distinguished, edited, controversiality, parent_id` **✅ HOLDS**
  - Type: Candidate Key
  - Confidence: High

- `id` → `created_utc, ups, subreddit_id, link_id, name, score_hidden, author_flair_css_class, author_flair_text, subreddit, removal_reason, gilded, downs, archived, author, score, retrieved_on, body, distinguished, edited, controversiality, parent_id` **✅ HOLDS**
  - Type: Candidate Key
  - Confidence: High

**Domain-Based Dependencies:**

- `subreddit_id` → `subreddit` **✅ HOLDS**
  - Type: Domain-Based
  - Confidence: High
  - Description: Subreddit ID determines subreddit name

- `id` → `subreddit_id` **✅ HOLDS**
  - Type: Domain-Based
  - Confidence: High
  - Description: Comment/Post ID determines subreddit ID

- `link_id` → `subreddit_id` **✅ HOLDS**
  - Type: Domain-Based
  - Confidence: High
  - Description: Post link ID determines subreddit ID

- `link_id` → `author` **❌ FAILS**
  - Type: Domain-Based
  - Confidence: High
  - Description: Post link ID determines author
  - Violations: 491 violations in 3102 groups
  - Example violations:
    - link_id=t3_2ypcks -> author=['MasterT231', 'Commando320']
    - link_id=t3_30zzvs -> author=['Shadow-Pie', 'ChibibuddyDE']

- `id` → `author` **✅ HOLDS**
  - Type: Domain-Based
  - Confidence: High
  - Description: Comment/Post ID determines author

- `author` → `author_flair_text` **❌ FAILS**
  - Type: Domain-Based
  - Confidence: High
  - Description: Author determines flair text (may fail - authors can have different flairs per subreddit)
  - Violations: 14 violations in 4099 groups
  - Example violations:
    - author=AutoModerator -> author_flair_text=['Robot', 'AutoBot', '／人◕ ‿‿ ◕人＼']
    - author=Dylan0812 -> author_flair_text=["What's the craic big lad?", 'Northern Ireland']

- `author` → `author_flair_css_class` **❌ FAILS**
  - Type: Domain-Based
  - Confidence: High
  - Description: Author determines flair CSS class (may fail - authors can have different flairs per subreddit)
  - Violations: 16 violations in 4099 groups
  - Example violations:
    - author=AutoModerator -> author_flair_css_class=['robot', 'DinklebotGif', 'nazi']
    - author=Dylan0812 -> author_flair_css_class=['30', '253']

- `link_id` → `created_utc` **❌ FAILS**
  - Type: Domain-Based
  - Confidence: High
  - Description: Post link ID determines creation timestamp
  - Violations: 594 violations in 3102 groups
  - Example violations:
    - link_id=t3_2q43do -> created_utc=[1430438409, 1430438417, 1430438433]
    - link_id=t3_2ypcks -> created_utc=[1430438440, 1430438538]

- `id` → `link_id` **✅ HOLDS**
  - Type: Domain-Based
  - Confidence: High
  - Description: Comment ID determines parent post link ID

## Schema-Based Functional Dependencies

These functional dependencies are derived from the database schema:

### `Users`
- **FD**: `author` → `author_flair_text, author_flair_css_class`
- **Description**: Primary key determines all user attributes

### `Subreddit`
- **FD**: `subreddit_id` → `subreddit`
- **Description**: Subreddit ID uniquely determines subreddit name

### `Post`
- **FD**: `link_id` → `subreddit_id, author, created_utc, archived, gilded, edited`
- **Description**: Post ID determines all post attributes

### `Post_Link`
- **FD**: `link_id` → `post_id, retrieved_on`
- **Description**: Link ID determines post reference and retrieval timestamp

### `Comment`
- **FD**: `id` → `body, author, link_id, parent_id, created_utc, retrieved_on, score, ups, downs, score_hidden, gilded, controversiality, edited`
- **Description**: Comment ID determines all comment attributes

### `Moderation`
- **FD**: `mod_action_id` → `target_type, target_id, subreddit_id, removal_reason, distinguished, action_timestamp`
- **Description**: Moderation action ID determines all moderation attributes

## Foreign Key Relationships

These relationships indicate referential dependencies:

- `Post.subreddit_id` → `Subreddit.subreddit_id` (Post belongs to Subreddit)
- `Post.author` → `Users.author` (Post authored by User)
- `Post_Link.post_id` → `Post.link_id` (Post_Link references Post)
- `Comment.link_id` → `Post.link_id` (Comment belongs to Post)
- `Comment.author` → `Users.author` (Comment authored by User)
- `Moderation.subreddit_id` → `Subreddit.subreddit_id` (Moderation action in Subreddit)

## Recommendations

### Normalization Status

The current schema appears to be in **3NF (Third Normal Form)** or higher:

- ✅ Tables are normalized with separate entities (Users, Subreddit, Post, Comment)
- ✅ Foreign key relationships properly maintain referential integrity
- ✅ Primary keys ensure entity uniqueness
- ✅ No transitive dependencies observed in the normalized tables

### Potential Optimizations

1. **Index Recommendations**:
   - Index on foreign key columns for faster joins
   - Index on frequently queried attributes (e.g., `created_utc`, `author`)

2. **Data Integrity**:
   - Consider adding CHECK constraints for enumerated values
   - Validate timestamp ranges for `created_utc` and `edited` fields
